<mxfile host="app.diagrams.net">
  <diagram id="bill-input-flow" name="账单录入流程图">
    <mxGraphModel dx="1428" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- 开始 -->
        <mxCell id="start" value="开始"
          style="ellipse;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="350" y="40" width="120" height="50" as="geometry"/>
        </mxCell>

        <!-- 用户进入账单录入界面 -->
        <mxCell id="step1" value="用户进入账单录入界面"
          style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="330" y="120" width="200" height="50" as="geometry"/>
        </mxCell>

        <!-- 输入账单信息 -->
        <mxCell id="step2" value="输入账单信息（金额/类型/分类/日期/备注）"
          style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="280" y="200" width="300" height="60" as="geometry"/>
        </mxCell>

        <!-- 判断是否启用 OCR -->
        <mxCell id="decision1" value="系统是否启用 OCR 识别？"
          style="rhombus;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="330" y="300" width="200" height="80" as="geometry"/>
        </mxCell>

        <!-- 解析图片草稿（OCR 启用 YES） -->
        <mxCell id="ocrYes" value="解析图片生成账单草稿"
          style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="330" y="410" width="220" height="50" as="geometry"/>
        </mxCell>

        <!-- OCR = 否（不启用） -->
        <mxCell id="ocrNo" value="用户手动填写账单"
          style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="620" y="320" width="200" height="50" as="geometry"/>
        </mxCell>

        <!-- 用户确认提交账单 -->
        <mxCell id="step3" value="用户确认提交账单"
          style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="330" y="500" width="200" height="50" as="geometry"/>
        </mxCell>

        <!-- 保存账单 -->
        <mxCell id="step4" value="系统保存账单至数据库"
          style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="330" y="580" width="240" height="50" as="geometry"/>
        </mxCell>

        <!-- 返回结果 -->
        <mxCell id="result" value="返回录入结果"
          style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="350" y="660" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- 结束 -->
        <mxCell id="end" value="结束"
          style="ellipse;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#000000;fillColor=#ffffff;"
          vertex="1" parent="1">
          <mxGeometry x="350" y="740" width="120" height="50" as="geometry"/>
        </mxCell>

        <!-- 连线 -->
        <mxCell id="edge1" edge="1" parent="1" source="start" target="step1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge2" edge="1" parent="1" source="step1" target="step2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge3" edge="1" parent="1" source="step2" target="decision1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- YES -->
        <mxCell id="yesEdge" value="是" style="edgeStyle=orthogonalEdgeStyle;html=1;fontSize=12;"
          edge="1" parent="1" source="decision1" target="ocrYes">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- NO -->
        <mxCell id="noEdge" value="否" style="edgeStyle=orthogonalEdgeStyle;html=1;fontSize=12;"
          edge="1" parent="1" source="decision1" target="ocrNo">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- NO 回到继续流程 -->
        <mxCell id="ocrNoBack" edge="1" parent="1" source="ocrNo" target="step3">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- YES 继续 -->
        <mxCell id="edge4" edge="1" parent="1" source="ocrYes" target="step3">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge5" edge="1" parent="1" source="step3" target="step4">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge6" edge="1" parent="1" source="step4" target="result">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge7" edge="1" parent="1" source="result" target="end">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
